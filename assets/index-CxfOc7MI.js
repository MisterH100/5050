(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();function p(){let e=Number(localStorage.getItem("time-skip"))||0;return e==0?new Date(Date.now()):new Date(e+Date.now())}function H(e){return Math.round(e*100)}function D(e){return e.reduce((a,l)=>Number(a)+Number(l),0).toFixed(2)}function W(e,t){return e==t?Math.floor(e/t*100):(e/t*100).toFixed(1)}function v(e){if(e==null)return 0;let t=p();t.setHours(0,0,0,0),e=new Date(e),e.setHours(0,0,0,0);let a=t.getTime()-e.getTime(),l=Math.floor(a/(1e3*60*60*24));return l-=1,l<=1?0:l}function x(e,t){return t=new Date(t),e.setHours(0,0,0,0),t.setHours(0,0,0,0),e.getTime()!=t.getTime()}function R(e){let t=new Audio(e);t&&t.play()}function w(e){let t=document.getElementById("notification");t.innerHTML=`<span>${e}</span>`,t.classList.add("notification-active");let a=setTimeout(()=>{t.classList.remove("notification-active"),clearTimeout(a)},3e3)}const J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=505e3,F=document.getElementById("dayElement");let _=document.getElementById("completeDays"),U=document.getElementById("missedDays"),Y=document.getElementById("percentageCounter");function B(){let e=JSON.parse(localStorage.getItem("appstate")),t=p(),a=J[t.getDay()],l=t.getDate(),n=W(e.totalCents,q),r=v(e.lastSave);!e.lastSave==null&&(r=v(e.lastSave)),F.innerHTML=`
        <span class="day">${a}</span>
        <span class="date">${l}</span>`,_.innerHTML=`Complete Days: ${e.completeDays}`,U.innerHTML=`Missed Days: ${r}`,Y.innerHTML=`Saved: ${n}%`}const c=(e,t)=>{typeof localStorage<"u"?localStorage.setItem(e,JSON.stringify(t)):typeof sessionStorage<"u"&&sessionStorage.setItem(e,JSON.stringify(t))},N=1e3,j=150,m=document.getElementById("wheel"),g=document.getElementById("wheelContainer");let T=document.getElementById("totalAmount"),h=document.getElementById("submitBtn");function C(e){let t=JSON.parse(localStorage.getItem("appstate")),a=t.currentWheelRotation;a+=e,m.style.transform=`rotate(${a}deg)`,K(a),t.currentWheelRotation=a,c("appstate",t)}function K(e){document.querySelectorAll(".lable").forEach(a=>{a.style.opacity=0;let l=setTimeout(()=>{a.classList.add("fade-in"),clearTimeout(l)},N/7);a.style.transform=`rotate(-${e}deg)`})}function $(){let e=JSON.parse(localStorage.getItem("appstate")),t=e.currentArray,a=e.selectedArray,l=t.length;if(l<6)for(let n=0;n<6-l;n++)t.push(0);m.replaceChildren(" ");for(let n=0;n<t.length;n++){let r=document.createElement("div");r.id=t[n],r.innerHTML=`<span class="lable">R${t[n]}</span>`,r.classList.add("slice"),r.id=="0"&&r.setAttribute("data-status","disabled");const o=360/t.length*n;r.style.transform=`rotate(${o}deg)
                             translateY(-${j}px)
                             rotate(${-o}deg)`,m.appendChild(r)}if(e.clicksPerDay<1?(w("Let's stash again Tommorrow!"),h.setAttribute("disabled",""),h.style.cursor="not-allowed"):h.addEventListener("click",()=>{z()}),a.length>0){m.querySelectorAll("div").forEach(o=>{for(let d=0;d<a.length;d++)o.id==a[d]&&o.classList.add("slice-active")});let r=D(a);T.innerText=`Save R${r} Today`}e.centerWheel&&O()}function O(){g.style.opacity=0,g.style.justifyContent="center";let e=setTimeout(()=>{g.classList.add("fade-in"),clearTimeout(e)},N/7)}function X(e){let t=JSON.parse(localStorage.getItem("appstate")),a=t.selectedArray;if(t.clicksPerDay<1&&!a.includes(e.id)){w("Daily limit reached!");return}a.includes(e.id)?(a=a.filter(r=>r!=e.id),t.clicksPerDay+=1,t.selectedArray=a,c("appstate",t),e.classList.remove("slice-active")):(a.push(e.id),t.clicksPerDay-=1,t.selectedArray=a,c("appstate",t),e.classList.add("slice-active"));let n=D(a);T.innerText=`Save R${n} Today`}function z(){let e=JSON.parse(localStorage.getItem("appstate")),t=e.numArray,a=e.selectedArray,l=e.currentArray,n=D(a),r=p();if(a<1)return;for(let s=0;s<a.length;s++)l=l.filter(P=>P!=a[s]);let o=6-l.length;if(!t.length<1){for(let s=0;s<o&&!(s>=t.length);s++)l.push(t[s]);t=t.slice(o,t.length)}t.length<=l.length&&!e.centerWheel&&(e.centerWheel=!0,O()),R("/audio/money-bag-short.mp3"),e.totalCents+=H(Number(n)),e.completeDays+=1,e.numArray=t,e.currentArray=l,e.selectedArray=[],e.lastSave=r,e.clicksPerDay=0,c("appstate",e),T.innerText="Save R0.00 Today",$(),M(),B();let d=360/6;C(d)}function M(){m.querySelectorAll("div").forEach(t=>{t.addEventListener("click",()=>{X(t)})})}const u={banner:{name:"Banner",tutorial:"Banner displays: Date, Completed Days, Total Saved in %, Missed Days"},wheel:{name:"Wheel",tutorial:"Wheel Display amounts in Rands. Tap on amount to select. A maximum of 2 amount can be selected per day. If two Amounts are selected they will add up to form a total Amount"},submit:{name:"Submit",tutorial:"Submit the total amount selected. Submition confirms that the total amount is to be stashed (BE HONEST)"}},G=document.getElementById("body"),E=document.getElementById("banner"),L=document.getElementById("wheelContainer"),Q=document.getElementById("bottomContainer"),b=document.createElement("div");let f=document.createElement("div"),y=1;function k(){switch(b.classList.add("tutorial-overlay"),G.appendChild(b),y){case 1:S(E),A(u.banner.name,u.banner.tutorial,200);break;case 2:I(E),S(L),A(u.wheel.name,u.wheel.tutorial,0);break;case 3:I(L),S(Q),A(u.submit.name,u.submit.tutorial,450);break}}function S(e){e.classList.add("highlight")}function I(e){e.classList.remove("highlight")}function V(){let e=JSON.parse(localStorage.getItem("appstate"));e.firstLaunch=!1,c("appstate",e),window.location.reload()}function A(e,t,a){f.innerHTML=`
      <h2>${e} <span>${y}</stage></h2>
      <p>${t}</p>
      <button id="next">Next</button>
  `,f.style.top=`${a}px`,f.classList.add("tutorial-info"),b.appendChild(f),document.getElementById("next").addEventListener("click",()=>{if(y>=3){V();return}y+=1,k()})}let i=JSON.parse(localStorage.getItem("appstate"));if(!i){let e=Array.from({length:100},(a,l)=>l+1),t=e.slice(0,6);i={numArray:e.slice(6,100),currentArray:t,selectedArray:[],centerWheel:!1,currentWheelRotation:0,totalCents:0,clicksPerDay:2,currentStreak:0,completeDays:0,lastSave:null,firstLaunch:!0},c("appstate",i)}function Z(){if(i=JSON.parse(localStorage.getItem("appstate")),i.firstLaunch&&k(),i.lastSave!=null){let e=p();x(e,i.lastSave)&&(i.clicksPerDay=2,c("appstate",i))}B(),$(),M(),C(0)}Z();
